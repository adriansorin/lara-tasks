{"version":3,"sources":["pubsub.js","ajax-helpers.js","app.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["(function($){\r\n\r\n\tvar o = $({});\r\n\r\n\t$.subscribe = function() {\r\n\t\to.on.apply(o, arguments);\r\n\t}\r\n\r\n\t$.unsubscribe = function() {\r\n\t\to.off.apply(o, arguments);\r\n\t}\r\n\r\n\t$.publish = function() {\r\n\t\to.trigger.apply(o, arguments);\r\n\t}\r\n\t\r\n}(jQuery));","(function(){\r\n\r\n\tvar showMessages = function(jsonData) {\r\n\r\n\t\t$('.flash').html('');\r\n\r\n\t\tfor (var key in jsonData) {\r\n\t\t\t\t$('.flash').append('<p>' + jsonData[key][0] + '</p>');\t\r\n\t\t};\r\n\r\n\t\t$.publish('form.submitted');\r\n\r\n\t};\r\n\r\n\tvar submitFormAjaxRequest = function(e) {\r\n\r\n\t\tvar form = $(this);\r\n\r\n\t\tvar method = form.find('input[name=\"_method\"]').val() || 'POST';\r\n\r\n\t\t$.ajax({\r\n\r\n\t\t\ttype: method,\r\n\r\n\t\t\turl: form.prop('action'),\r\n\r\n\t\t\tdata: form.serialize(),\r\n\r\n\t\t\tsuccess: function(data) {\r\n\t\t\t\tshowMessages(data);\r\n\r\n\t\t\t\tvar redirect = form.data('remote');\r\n\r\n\t\t\t\tif (typeof redirect != 'undefined' && redirect) {\r\n\t\t\t\t\twindow.location.href = redirect;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tform.get(0).reset();\r\n\t\t\t\t};\r\n\t\t\t}, \r\n\r\n\t\t\terror: function(data) {\r\n\t\t\t\tshowMessages(data.responseJSON);\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\te.preventDefault();\r\n\t};\r\n\r\n\tvar submitLinkAjaxRequest = function(e) {\r\n\r\n\t\tvar link = $(this);\r\n\r\n\t\t$.ajax({\r\n\r\n\t\t\ttype: 'POST',\r\n\r\n\t\t\turl: link.prop('href'),\r\n\r\n\t\t\tdata: 'id=' + link.data('remote-link'),\r\n\r\n\t\t\tsuccess: function(data) {\r\n\t\t\t\tshowMessages(data);\r\n\r\n\t\t\t\tvar redirect = link.data('remote-redirect');\r\n\r\n\t\t\t\tif (typeof redirect != 'undefined' && redirect) {\r\n\t\t\t\t\twindow.location.href = redirect;\r\n\t\t\t\t};\r\n\t\t\t}, \r\n\r\n\t\t\terror: function(response) {\r\n\t\t\t\tshowMessages(data.responseJSON);\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\te.preventDefault();\r\n\t};\r\n\r\n\t$('form[data-remote]').on('submit', submitFormAjaxRequest);\r\n\t$('*[data-remote-link]').on('click', submitLinkAjaxRequest);\r\n\t$('*[data-submits-form]').on('change', function(){\r\n\t\t$(this).closest('form').submit();\r\n\t});\r\n\r\n})();","(function(){\r\n\r\n\t$.subscribe('form.submitted', function() {\r\n\t\t$('.flash').fadeIn(500).delay(5000).fadeOut(500);\r\n\t});\r\n\r\n})();"],"sourceRoot":"/source/"}